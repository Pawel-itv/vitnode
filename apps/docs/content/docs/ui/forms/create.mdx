---
title: Create Form
description: How to create forms in VitNode.
---

VitNode uses [react-hook-form](https://react-hook-form.com/) to manage forms and [zod](https://zod.dev/) for form validation. This combination is lightweight and easy to use.

## Installation

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';

<Tabs id='package-manager' persist items={['pnpm', 'npm']}>

```bash tab="pnpm"
pnpm i react-hook-form zod
```

```bash tab="npm"
npm i react-hook-form zod
```

</Tabs>

## Usage

We're recomend to create a hook to handle the form state and submission. It will make your code cleaner and easier to maintain.

```ts title="hooks/use-example.ts"
export const useExample = () => {};
```

import { Step, Steps } from 'fumadocs-ui/components/steps';

<Steps>
<Step>

### Form Schema

Define the shape of your form using a Zod schema. You can read more about using [Zod in the Zod documentation](https://zod.dev/).

```ts title="hooks/use-example.ts"
import * as z from 'zod';
import { zodInput } from 'vitnode-frontend/helpers/zod';

export const useExample = () => {
  const formSchema = z.object({
    name: zodInput.languageInput.min(1),
    description: zodInput.languageInput,
  });
};
```

#### zodInput

For VitNode we're created a `zodInput` helper to provide a custom validation function for the form fields.

| Param                    | Description                          |
| ------------------------ | ------------------------------------ |
| `zodInput.languageInput` | Validate a language array input.     |
| `zodInput.string`        | Validate a string with triming text. |

</Step>
<Step>

### Form State

Define the form state with default values with return the `form` object.

```ts title="hooks/use-example.ts"
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { zodInput } from 'vitnode-frontend/helpers/zod';

export const useExample = () => {
  const formSchema = z.object({
    name: zodInput.languageInput.min(1),
    description: zodInput.languageInput,
  });

  // [!code word:form]
  const form = useForm<z.infer<typeof formSchema>>({
    resolver: zodResolver(formSchema),
    defaultValues: {
      name: [],
      description: [],
    },
  });

  return { form };
};
```

</Step>
<Step>

### Form Submission

Define the `onSubmit` function that will be called when the form is submitted.

```ts title="hooks/use-example.ts"
import * as z from 'zod';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { zodInput } from 'vitnode-frontend/helpers/zod';

export const useExample = () => {
  const formSchema = z.object({
    name: zodInput.languageInput.min(1),
    description: zodInput.languageInput,
  });

  const form = useForm<z.infer<typeof formSchema>>({
    resolver: zodResolver(formSchema),
    defaultValues: {
      name: [],
      description: [],
    },
  });

  // [!code word:onSubmit]
  const onSubmit = (values: z.infer<typeof formSchema>) => {
    // Do something
  };

  return { form, onSubmit };
};
```

In `onSubmit` function you can call [Mutation with Server Action](/fetch#mutation).

</Step>
<Step>

### Form HTML

Now you can use the `<Form />` components to build your form.

```tsx title="example.tsx"
import { useTranslations } from 'next-intl';
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from 'vitnode-frontend/components/ui/form';
import { TextLanguageInput } from '@/components/text-language-input';
import { Button } from 'vitnode-frontend/components/ui/button';
import { Editor } from 'vitnode-frontend/components/ui/editor';

import { useExample } from './hooks/use-example';

export const Example = () => {
  const t = useTranslations('example');
  const { form, onSubmit } = useExample();

  return (
    <Form {...form}>
      <form
        onSubmit={form.handleSubmit(onSubmit)}
        className="flex flex-col gap-4"
      >
        <FormField
          control={form.control}
          name="name"
          render={({ field }) => (
            <FormItem>
              <FormLabel>{t('create.name.label')}</FormLabel>
              <FormControl>
                <TextLanguageInput {...field} />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />

        <FormField
          control={form.control}
          name="description"
          render={({ field }) => (
            <FormItem>
              <FormLabel>{t('create.description.label')}</FormLabel>
              <FormControl>
                <Editor {...field} />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />

        <Button
          type="submit"
          onClick={form.handleSubmit(onSubmit)}
          loading={form.formState.isSubmitting}
          disabled={!form.formState.isValid}
        >
          {t('submit')}
        </Button>
      </form>
    </Form>
  );
};
```

</Step>
</Steps>

## Tips & Tricks

Here are some tips and tricks to help you build forms in VitNode.

### Upload Files

TODO: Add tutorial to upload files.
